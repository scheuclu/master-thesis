\section{Introduction}



\begin{frame}
\frametitle{AAA}
\centering
\begin{tikzpicture}[node distance = 0.6cm, auto]
        \def\hdist{0.7cm}
        \node [blockb]                                      (l11) {$\pdfrac{\optcrit}{\absvar}$};
        \node [below of = l11]                              (l11o) {};
        
        %level-2
        \node [blocka, below of=l11o]                      (l23) {$\pdfrac{\optcrit_j}{\absvar_i}$};
        \node [blocka, left =\hdist of l23]               (l22) {$\pdfrac{\optcrit_j}{\dfstate}$};
        \node [blockb, left =\hdist of l22]               (l21) {$\tfrac{\dfstate}{\absvar_i}$};
        \node [blocka, right =\hdist of l23]              (l24) {$\pdfrac{\optcrit}{\dmpos}$};
        \node [blocka, right =\hdist of l24]              (l25) {$\tfrac{\dmpos}{\absvar_i}$};
        \node [above of = l21]                            (l21u) {};
        \node [below of = l21]                            (l21o) {};
        \node [below of = l22]                            (l22o) {};
        \node [below of = l23]                            (l23o) {};
        \node [below of = l24]                            (l24o) {};
        \node [below of = l25]                            (l25o) {};
        
        %level-3
        \node [blocka, below of=l23o]                      (l33) {$\pdfrac{\dresidual}{\dfstate}$};
        \node [blockb, left =\hdist of l33]               (l32) {$\tfrac{\dresidual}{\absvar}$};
        \node [blocka, left =\hdist of l32]               (l31) {$\pdfrac{\dresidual}{\dmpos}$};
        \node [blocka, right =\hdist of l33]              (l34) {$\tfrac{\dmpos}{\absvar_i}$};
        %\node [blocka, right =\hdist of l34]              (l35) {l35};
        \node [below of = l31]                            (l31o) {};
        \node [below of = l32]                            (l32o) {};
        \node [below of = l33]                            (l33o) {};
        \node [below of = l34]                            (l34o) {};
        %\node [below of = l35]                            (l35o) {};
        
        %level-4
        \node [blockb, below of=l33o]                     (l43) {$\pdfrac{\dresidual}{\absvar}$};
        \node [blocka, left =\hdist of l43]               (l42) {$\pdfrac{\dresidual}{\dfstate^{\star}}$};
        \node [blocka, left =\hdist of l42]               (l41) {$\pdfrac{\dfstate^{\star}}{\absvar}$};
        \node [blocka, right =\hdist of l43]              (l44) {$\pdfrac{\dfstateprim^g}{\dfstateprim^a}$};
        %\node [blocka, right =\hdist of l44]             (l45) {$\pdfrac{}{}$};
        \node [below of = l41]                            (l41o) {};
        \node [below of = l42]                            (l42o) {};
        \node [below of = l43]                            (l43o) {};
        \node [below of = l44]                            (l44o) {};
        %\node [below of = l45]                            (l45o) {};
        
        %level-5
        \node [blocka, below of=l43o]                      (l53) {$\pdfrac{\dfstateprim^g}{\absvar}$};
        \node [blocka, left =\hdist of l53]               (l52) {$\pdfrac{\dresidual}{\dmpos}$};
        %\node [blocka, left =\hdist of l52]               (l51) {l51};
        \node [blocka, right =\hdist of l53]              (l54) {$\pdfrac{\dmpos}{\absvar}$};
        %\node [blocka, right =\hdist of l54]              (l55) {l55};
        
  
        %thick lines      
        \draw[-,very thick] (l11) -- (l11o);
        \draw[-,very thick] (l11o) -| (l21);
        \draw[-,very thick] (l21u) -| (l11);
        
        \draw[-,very thick] (l21) |- (l22o);
        \draw[-,very thick] (l21o) -| (l32);
        
        \draw[-,very thick] (l32) |- (l33o);
        \draw[-,very thick] (l32o) -| (l43);
        
        %thin lines
        \draw[-] (l11o) -| (l22);
        \draw[-] (l11o) -| (l23);
        \draw[-] (l11o) -| (l24);
        \draw[-] (l11o) -| (l25);
        \draw[-] (l21o) -- (l31);
        \draw[-] (l21o) -| (l33);
        \draw[-] (l21o) -| (l34);
        \draw[-] (l41) |- (l34o);
        \draw[-] (l44) |- (l31o);
        \draw[-] (l43) -- (l53);
        \draw[-] (l52) |- (l44o);
        \draw[-] (l42o) -| (l54);
        
        
        %draw dashed lines
        \draw[gray,dashed] (l22) -- (l22o) node[midway] (l22){};
        \draw[gray,dashed] (l23) -- (l23o) node[midway] (l23){};
        \draw[gray,dashed] (l24) -- (l24o) node[midway] (l24){};
        \draw[gray,dashed] (l25) -- (l25o) node[midway] (l25){};
        
        \draw[gray,dashed] (l31) -- (l31o) node[midway] (l31){};
        \draw[gray,dashed] (l33) -- (l33o) node[midway] (l33){};
        \draw[gray,dashed] (l34) -- (l34o) node[midway] (l34){};
        
        \draw[gray,dashed] (l41) -- (l41o) node[midway] (l41){};
        \draw[gray,dashed] (l42) -- (l42o) node[midway] (l42){};
        \draw[gray,dashed] (l44) -- (l44o) node[midway] (l44){};
\end{tikzpicture}
\end{frame}







\begin{frame}
  \frametitle{Motivation}
  \only<1>{\framesubtitle{ Basics}}
  \only<2>{\framesubtitle{-> Why Sensitivity Analysis?}}
  \only<3>{\framesubtitle{-> Why Embedded framework?}}
  \only<4->{\framesubtitle{-> Why analytic approach?}}
  \begin{itemize}
    \item Aerodynamic optimization
     \begin{itemize}
       \item \textbf<2>{Gradient based}
       \item \textbf<2>{Take the human out of the loop}
     \end{itemize}
    \item Requirements on CFD
      \begin{itemize}
      \item \textbf<3>{Complex flows (transonic, turbulent \dots) and high Reynolds numbers}
      \item Well-resolved boundary layers and flow features
      \item Steady/unsteady flows
      \item \textbf<4>{Numerical accuracy, solver robustness and short turn-around time}
      \item \textbf<3>{Moderate to highly complex geometries}
      \end{itemize}
    \item Requirements on design and optimization 
      \begin{itemize}
      \item Automatic framework
      \item Efficient optimization algorithms
      \item \textbf<3>{Large number of design variables}
      \item Multi-point design and multi-disciplinary design optimization
      \item Geometrical/engineering constraints 
      \end{itemize}
   \end{itemize}
   \onslide<3>{$\rightarrow$\textbf{Embedded framework}}\\
   \onslide<4>{$\rightarrow$\textbf{Analytic Sensitivities}}
\end{frame}


%-----------------------------------------------------------------------------------------------------

\begin{frame}
  \frametitle{The AERO-Suite\footcite{Aerof}~\footcite{Aeros}}
  \framesubtitle{Workflow}
%  \centering
  \def\vert{0.5cm}
  \def\horz{0.5cm}
  \centering
      \scalebox{0.8}{\begin{tikzpicture}[scale=1.0]
        \node [block3]                                      (aerof) {\textbf<2>{Aero-F}};
        \node [block3, below right=\vert and \horz of aerof]   (matcher) {Matcher};
        \node [block3, above right=\vert and \horz of matcher] (aeros) {Aero-S};
        \node [block3, below=\vert of matcher]             (sower) {Sower};
        \node [block3, below=\vert of sower]             (mesh) {Mesh};
        \node [block3, above right=\vert and \horz of aerof] (sowerr) {Sower};
        \node [block3, above=\vert of sowerr]             (xpexo) {xpexo};
        
        \node [block,below=\vert of mesh]             (gmsh) {GMSH};
        \node [block,above=\vert of xpexo]             (paraview) {Paraview};
        
        \draw[<->,dashed,thick] (aerof) -- (matcher);
        \draw[<->,dashed,thick] (aeros) -- (matcher);
        \draw[->,dashed,thick] (sower) -- (matcher);
        \draw[->,thick] (sower) -| (aerof);
        \draw[->,thick] (sower) -| (aeros);
        
        \draw[->,thick] (mesh) -- (sower);
        \draw[->,thick] (gmsh) -- (mesh);
        \draw[->,thick] (sowerr) -- (xpexo);
        \draw[->,thick] (xpexo) -- (paraview);
        
        \draw[->,thick] (aerof) |- (sowerr);
        \draw[->,thick] (aeros) |- (sowerr);
        
        \draw[darkgrey,thick,dashed] ($(gmsh.north west)+(-4.0,0.15)$)  rectangle ($(xpexo.north east)+(4.0,0.15)$);    %SDesign
     \end{tikzpicture}}
\end{frame}


%------------------------------------------------------------------------------

\begin{frame}
  \frametitle{Aerodynamic shape optimization}
  \only<1>{\framesubtitle{-> Overview}}
  \only<2>{\framesubtitle{-> Thesis focus}}
  
  \begin{columns}
    \begin{column}{0.55\textwidth}
      \scalebox{0.9}{\begin{tikzpicture}[scale=1.0,node distance = 1.2cm]
        \node [block]                                      (init) {Initial geometry};
        \node [block1, below of=init]                      (parameter) {Parameter change};
        \node [block1, below= 1cm of parameter]                 (modify) {\textbf<2>{Shape}  \mbox{\textbf<2>{modification}}};
        \node [block2, below= 1cm of modify]                    (mesh) {Mesh procedure};
        \node [block3, below of=mesh]                      (simulation) {Flow simulation};
        \node [decision, right of=parameter, node distance=3.5cm] (decide) {Optimum?};
        \node [block4, right of=mesh, node distance=3.5cm] (optimize) {Gradient based optimization};
        \node [block3, below of=simulation]                (objective) {\textbf<2>{Gradient of objective function \& constraints}}; 
        \path [line] (init) -- (parameter);
        \path [line] (parameter) -- (modify);
        \path [line] (decide) -- (parameter);        
        \path [line] (modify) -- (mesh);
        \path [line] (mesh) -- (simulation);
        \path [line] (simulation) -- (objective);   
        \path [line] (objective) -| (optimize);
        \path [line] (optimize) -- (decide);  
        
        \draw[darkgrey,thick,dotted] ($(parameter.north west)+(-0.2,0.15)$)  rectangle ($(parameter.south east)+(0.2,-0.45)$);    %SDesign
        \draw[darkgrey,thick,dotted] ($(modify.north west)+(-0.2,0.15)$)  rectangle ($(modify.south east)+(0.2,-0.45)$);    %SDesign
        \draw[darkgrey,thick,dotted] ($(mesh.north west)+(-0.2,0.15)$)    rectangle ($(objective.south east)+(0.2,-0.45)$); %Aero-F   
        \draw[darkgrey,thick,dotted] ($(decide.north west)+(-1.2,0.6)$)   rectangle ($(optimize.south east)+(0.2,-0.45)$);  %Python
        
        \node [darkgrey,anchor=north east] at  ($(parameter.south east)+(0.0,0.0)$)                (aaa) {\texttt{Bash}};
        \node [darkgrey,anchor=north east] at  ($(optimize.south east)+(0.0,0.0)$)                (aaa) {\texttt{Python}};
%        \onslide<1>{\node [darkgrey,anchor=north east] at  ($(optimize.south east)+(0.0,0.0)$)                (aaa) {\texttt{Python}};};
%        \onslide<2>{\node [black,anchor=north east] at  ($(optimize.south east)+(0.0,0.0)$)                (aaa) {\texbf{Python}};};
        \node [darkgrey,anchor=north east] at  ($(objective.south east)+(0.0,0.0)$)                (aaa) {\texttt{Aero-F}};
        \node [darkgrey,anchor=north east] at  ($(modify.south east)+(0.0,0.0)$)                (aaa) {\texttt{SDesign}};
      \end{tikzpicture}}
    \end{column}
    \begin{column}{0.45\textwidth}
      \begin{block}{Gradient based optimization}
       \begin{itemize}
       \item Requires objective function and constraints
       \item Gradient of objective function and constraints
       \end{itemize}
       \end{block}
      \begin{block}{How to compute the gradient}
       \begin{itemize}
       \item Finite difference
       \item \textbf<2>{Direct approach}
       \item Adjoint approach
       \end{itemize}
       \end{block}
    \end{column}      
  \end{columns}

\end{frame}

%------------------------------------------------------------------------------


