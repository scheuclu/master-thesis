\documentclass{standalone}
\usepackage{tikz}
\usetikzlibrary{positioning}
\usetikzlibrary{calc}
\def\mainpath{/home/lukas/Desktop/project/independence/project/thesis}
\def\tikzpath{\mainpath/fig/tikz}

\usetikzlibrary{positioning}
\usepackage{pgfplots}
\usepackage{pgfplotstable}
\usepgfplotslibrary{groupplots}


\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsthm}
%\input{\mainpath/customcommands}

\tikzset{>=latex}

\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
            \node[shape=circle,draw,inner sep=2pt] (char) {#1};}}

\input{\mainpath/colordefinitions}


% argument #1: any options
\newenvironment{customlegend}[1][]{%
    \begingroup
    % inits/clears the lists (which might be populated from previous
    % axes):
    \csname pgfplots@init@cleared@structures\endcsname
    \pgfplotsset{#1}%
}{%
    % draws the legend:
    \csname pgfplots@createlegend\endcsname
    \endgroup
}%

% makes \addlegendimage available (typically only available within an
% axis environment):
\def\addlegendimage{\csname pgfplots@addlegendimage\endcsname}



\begin{document}



\begin{tikzpicture}


 \begin{groupplot}[
group style = {group size = 2 by 3, horizontal sep=0.5cm, vertical sep=0.0cm},
height = 5cm,
width = 8cm,
]

\pgfplotsinvokeforeach{1,...,5}
{
  \nextgroupplot[hide axis, axis equal, enlargelimits=0.05, legend style={at={(-2.5,0.0)}, anchor=north,legend columns=-1}]
  %\begin{axis}[hide axis, axis equal]

  %draw design elements in original position
  \addplot[ opacity=1.0, thick,black,only marks,mark=o] table [skip first n=0,x index =0, y index=1, col sep=comma] 
  {\mainpath/fig/scripts/sdesign_visualization_2D/case#1/designelementnodes.csv};
  

  \addplot[ opacity=1.0, thick,dashed,black] table [skip first n=0,x index =0, y index=1, col sep=comma] 
  {\mainpath/fig/scripts/sdesign_visualization_2D/case#1/nodesfine.csv};

  \addplot[ opacity=1.0, thick,red,dashed] table [skip first n=0,x index =0, y index=1, col sep=comma] 
  {\mainpath/fig/scripts/sdesign_visualization_2D/case#1/nacanodes.csv};


  \addplot[ opacity=1.0, thick,black] table [skip first n=0,x index =0, y index=1, col sep=comma] 
  {\mainpath/fig/scripts/sdesign_visualization_2D/case#1/nodesfinemoved.csv};

  \addplot[ opacity=1.0, thick,red] table [skip first n=0,x index =0, y index=1, col sep=comma] 
  {\mainpath/fig/scripts/sdesign_visualization_2D/case#1/nacanodesmoved.csv};
}



  \nextgroupplot[hide axis, axis equal, enlargelimits=0.05, legend style={at={(0.0,0.0)}, anchor=north,legend columns=-1}]
  %\begin{axis}[hide axis, axis equal]

  %draw design elements in original position
  \addplot[ opacity=1.0, thick,black,only marks,mark=o] table [skip first n=0,x index =0, y index=1, col sep=comma] 
  {\mainpath/fig/scripts/sdesign_visualization_2D/case6/designelementnodes.csv};
  \addlegendentry{nodes}
  

  \addplot[ opacity=1.0, thick,dashed,black] table [skip first n=0,x index =0, y index=1, col sep=comma] 
  {\mainpath/fig/scripts/sdesign_visualization_2D/case6/nodesfine.csv};
  \addlegendentry{undeformed}

  \addplot[ opacity=1.0, thick,red,dashed] table [skip first n=0,x index =0, y index=1, col sep=comma] 
  {\mainpath/fig/scripts/sdesign_visualization_2D/case6/nacanodes.csv};
  \addlegendentry{undeformed}


  \addplot[ opacity=1.0, thick,black] table [skip first n=0,x index =0, y index=1, col sep=comma] 
  {\mainpath/fig/scripts/sdesign_visualization_2D/case6/nodesfinemoved.csv};
  \addlegendentry{deformed}

  \addplot[ opacity=1.0, thick,red] table [skip first n=0,x index =0, y index=1, col sep=comma] 
  {\mainpath/fig/scripts/sdesign_visualization_2D/case6/nacanodesmoved.csv};
  \addlegendentry{deformed}



\end{groupplot}

\end{tikzpicture}
\vspace{2cm}
%\begin{tikzpicture}
%
%    \begin{customlegend}[legend entries={$a$,$e^x$,C,$d$}]
%    \addlegendimage{red,fill=black!50!red,area legend}
%    \addlegendimage{red,fill=black!50!red,sharp plot}
%    \addlegendimage{red,fill=black!50!red,mark=*,sharp plot}
%    \addlegendimage{red,fill=black!50!red,ybar,ybar legend}
%    \end{customlegend}
%
%
%\end{tikzpicture}



\end{document}


