\documentclass{standalone}
\usepackage{tikz}
\usetikzlibrary{positioning}
\usetikzlibrary{calc}
\def\mainpath{/home/lukas/Desktop/project/independence/project/thesis/}
\def\tikzpath{\mainpath/fig/tikz}

\usetikzlibrary{positioning}
\usepackage{pgfplots}
\usepackage{pgfplotstable}
\usepgfplotslibrary{groupplots}
\usetikzlibrary{shapes}


\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsthm}
\input{\mainpath/customcommands}

\tikzset{>=latex}

\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
            \node[shape=circle,draw,inner sep=2pt] (char) {#1};}}

\input{\mainpath/colordefinitions}
\begin{document}



\begin{tikzpicture}

\def\R{4pt}
\def\styleprimal{thick};
\def\styleprimalbg{thick,color=green};
\def\styledual{dashed};
\def\stylesurrogate{[dashed, ultra thick]};
\def\stylereconstructed{[dashed, thin,blue]};


%nodes of primal cells
\node (v1) at (-5,3)      [label=right:{}]{};
\node (v3) at (-2.5,5.5)  [label=right:{}]{};
\node (v4) at (-3.5,-0.5) [label=right:{}]{};
\node (v2) at (-2,2) [label=left:{}] {};
\node (v6) at (1,2)  [label=right:{}] {};
\node (v5) at (0,-1)      [label=right:{}]{};
\node (v9) at (2.5,4.5)   [label=right:{}]{};
\node (v8) at (4.5,1)     [label=right:{}]{};
\node (v7) at (3.5,-1)    [label=right:{}]{};

%edges of primal cells
\draw [\styleprimal]  
                      (v3) edge (v2)
                      (v5) edge (v2)
                      (v6) edge (v2)
                      (v3) edge (v6)
                      (v5) edge (v6);
                      
%backround of primal cells
\draw [\styleprimal,color=lightgrey]  (v1) edge (v2)
                      (v4) edge (v2)
                      (v1) edge (v4)
                      (v3) edge (v1)
                      (v8) edge (v6)
                      (v7) edge (v8)
                      (v8) edge (v9)
                      (v4) edge (v5)
                      (v7) edge (v6)
                      (v7) edge (v5)
                      (v3) edge (v9)
                      (v9) edge (v6);

%node circles
\fill[fill=lightgrey] (v1) circle [radius=\R];
\fill[fill=lightgrey] (v4) circle [radius=\R];
\fill [draw=lightgrey, fill=white](v7) circle [radius=\R];
\fill [draw=lightgrey, fill=white](v8) circle [radius=\R];
\fill [draw=lightgrey, fill=white](v9) circle [radius=\R];
\fill (v2) circle [radius=\R];
\fill (v3) circle [radius=\R];
\fill (v5) circle [radius=\R];
\fill [draw=black, fill=white](v6) circle [radius=\R];






%nodes of dual cells
\node (v19) at (-3.5,3.5)       {};
\node (v11) at (-3.5,1.5)       {};
\node (v13) at (-1.973,0.1486)  {};
\node (v15) at (-0.5,1)         {};
\node (v17) at (-1.1785,3.0384) {};
\node (v21) at (0.6188,3.9709)  {};
\node (v23) at (2.5,2.5)        {};
\node (v25) at (2.9161,0.8087)  {};
\node (v27) at (1.389,0.0655)   {};
\node (v18) at (-2.2553,3.5655) {};
\node (v10) at (-3.5,2.5)       {};
\node (v12) at (-2.8407,0.633)  {};
\node (v14) at (-1,0.5)         {};
\node (v16)[diamond, scale=0.3, draw=primary_0, fill=primary_0] at (-0.5,2)         {};
\node (v162) at (-0.5,2)        {};
\node[diamond, scale=0.3, draw=primary_0, fill=primary_0] (v20) at (-0.6486,3.6486) {};
\node (v22) at (1.6998,3.2006)  {};
\node (v24) at (2.7674,1.4979)  {};
\node (v26) at (2.4161,0.2952)  {};
\node[diamond, scale=0.3, draw=primary_0, fill=primary_0]  (v28) at (0.4566,0.4574)  {};



%draw the material interface
\node (v29) at (0.8379,5.0682) {};
\node[] (v30) at (1.312,-1.2561) {};
\draw [fill=black, opacity=0.1](3.6472,5.2422) .. controls (-1.4069,3.7557) and (-0.9474,-2.2848) .. (3.2805,-2.245);
\draw [draw=lightgrey, thick](3.6472,5.2422) .. controls (-1.4069,3.7557) and (-0.9474,-2.2848) .. (3.2943,-2.2589);





%draw the surrogate interface
\draw [dashed, ultra thick, color=lightgrey] (v29) edge (v21)
                      (v21) edge (v20)
                      (v20) edge (v17)
                      (v17) edge (v16)
                      (v16) edge (v15)
                      (v15) edge (v28)
                      (v28) edge (v27)
                      (v27) edge (v30);
                      


%\node (v32) at (-0.1176,0.7609) {};
%\node (v34) at (0.8024,-1.3391) {};
%\node (v36) at (-2.8576,3.5409) {};
%\node (v38) at (-1.5,4.5) {};

%legend
\node (l1) at (6,4.5) [label=right:{active fluid node}]{};
\node (l2)at (6,3.5) [label=right:{ghost node}]{};
\draw [\styleprimal] (5,2.5) edge (6,2.5);
\node (l3)at (6,2.5) [label=right:{primal cell}]{};

\draw [dashed, ultra thick, color=lightgrey] (5,1.5) edge (6,1.5);
\node (l3)at (6,1.5) [label=right:{surrogate interface}]{};


\fill (l1) circle [radius=\R];
\fill [draw=black, fill=white](l2) circle [radius=\R];



%%nodes of primal cells
%\node (v1) at (-5,3)      [label=right:{1}]{};
%\node (v3) at (-2.5,5.5)  [label=right:{3}]{};
%\node (v4) at (-3.5,-0.5) [label=right:{4}]{};
%\node (v2) at (-2,2) [label=left:{$\fstate_{i}=\begin{bmatrix} a\\ b\\ c \end{bmatrix}$}] {};
%\node (v6) at (1,2)  [label=right:{$\fstate_{g}=\begin{bmatrix} a\\ b\\ c \end{bmatrix}$}] {};
%\node (v5) at (0,-1)      [label=right:{5}]{};
%\node (v9) at (2.5,4.5)   [label=right:{9}]{};
%\node (v8) at (4.5,1)     [label=right:{8}]{};
%\node (v7) at (3.5,-1)    [label=right:{7}]{};





\node (v39) at (3.616,5.0987) {};
\node (v40) at (2.1202,4.5609) {};
\node (v41) at (0.3639,2.6197) {};
\node (v42) at (0.1287,1.9978) {};
\node (v43) at (0.2211,-0.3299) {};
\node (v44) at (0.5992,-0.9938) {};
\node (v45) at (3.2547,-2.1282) {};

%\draw \stylereconstructed (v39) edge (v40);
%\draw \stylereconstructed (v40) edge (v41);
%\draw \stylereconstructed (v41) edge (v42);
%\draw \stylereconstructed (v42) edge (v43);
%\draw \stylereconstructed (v43) edge (v44);
%\draw \stylereconstructed (v44) edge (v45);



\node (v111) at (-2.5,5.5) [label=right:{$\fstate_{k}$}]{};
\node (v112) at (-2,2)     [label=left: {$\fstate_{i}=\begin{bmatrix} \dens_i\\ \fluidvel_i\\ \pres_i \end{bmatrix}$}] {};
\node (v113) at (1,2)      [label=right:{$\fstate_{g}=\frac{1}{n_g} \sum_{i=1}^{n_g} \fstate_{gi}$}] {};
\node (v114) at (0,-1)     [label=right:{$\fstate_{j}$}]{};
\node (v115) at (-0.5,2)   [label=below:{$\fstate_{ig}=\begin{bmatrix} \dens_i\\ \fluidvel_S\\ \pres_i \end{bmatrix}$}]{};


\end{tikzpicture}



\end{document}


